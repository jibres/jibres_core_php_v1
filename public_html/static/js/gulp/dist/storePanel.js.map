{"version":3,"sources":["shortkey.js"],"names":["bindShortkey","$","document","on","_e","event_corridor","call","this","_self","_key","which","ctrl","ctrlKey","shift","shiftKey","alt","altKey","mytxt","String","fromCharCode","navigateonFactorAddInputs","check_factor","clearDropdown","selectedRowEl","getSelectedRow","remove","val","trigger","calcFooterValues","preventDefault","RowCountEl","find","parents","RowDiscountEl","myPage","attr","factorUrl","factorType","undefined","qtyFactorTableItems","msg","notif","displayMode","window","open","Navigate","url","prevFactor","logy","length","shortkey_toggleDiscount","_confirm"],"mappings":"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","file":"storePanel.js","sourcesContent":["\r\n\r\n/**\r\n * [bindShortkey description]\r\n * @return {[type]} [description]\r\n */\r\nfunction bindShortkey()\r\n{\r\n  $(document).on(\"keydown\", function(_e) { event_corridor.call(this, _e)});\r\n  // $('ul li', explorer).click(function(e)    { event_corridor(e, e.currentTarget, 'click');    });\r\n}\r\n\r\n/**\r\n * corridor of all events on keyboard and mouse\r\n * @param  {[type]} e     the element that event doing on that\r\n * @param  {[type]} _self seperated element for doing jobs on it\r\n * @param  {[type]} _key  the key pressed or click or another events\r\n * @return {[type]}       void func not returning value! only doing job\r\n */\r\nfunction event_corridor(_e, _self, _key)\r\n{\r\n  if(!_key)\r\n  {\r\n    _key = _e.which;\r\n  }\r\n\r\n  _self = $(_self);\r\n  var ctrl   = _e.ctrlKey  ? 'ctrl'  : '';\r\n  var shift  = _e.shiftKey ? 'shift' : '';\r\n  var alt    = _e.altKey   ? 'alt'   : '';\r\n  var mytxt  = String(_key) + ctrl + alt + shift;\r\n  var keyp   = String.fromCharCode(_key);\r\n\r\n  // logy(mytxt, 'info');\r\n  switch(mytxt)\r\n  {\r\n    // ---------------------------------------------------------- Enter\r\n    case '13':              // Enter\r\n      break;\r\n\r\n    case '13ctrl':          // ctrl + Enter\r\n      break;\r\n\r\n\r\n    // ---------------------------------------------------------- Escape\r\n    case '27':              //Escape\r\n      break;\r\n\r\n\r\n    // ---------------------------------------------------------- Space\r\n    case '32':              // space\r\n    case '32shift':         // space + shift\r\n    case '32ctrl':          // space + ctrl\r\n    case '32ctrlshift':     // space + ctrl + shift\r\n\r\n      break;\r\n\r\n\r\n    // ---------------------------------------------------------- Page Up\r\n    case '33':              // PageUP\r\n      break;\r\n\r\n\r\n    // ---------------------------------------------------------- Up\r\n    case '38':              // up\r\n      navigateonFactorAddInputs('up', _e);\r\n      break;\r\n\r\n\r\n    // ---------------------------------------------------------- Page Down\r\n    case '34':              // PageDown\r\n      break;\r\n\r\n\r\n    // ---------------------------------------------------------- Down\r\n    case '40':              // down\r\n      navigateonFactorAddInputs('down', _e);\r\n      break;\r\n\r\n\r\n    // ---------------------------------------------------------- End\r\n    case '35':              // End\r\n      break;\r\n\r\n\r\n    // ---------------------------------------------------------- Home\r\n    case '36':              // Home\r\n      break;\r\n\r\n\r\n    // ---------------------------------------------------------- Left\r\n    case '37':              // left\r\n      navigateonFactorAddInputs('left');\r\n      break;\r\n\r\n\r\n    // ---------------------------------------------------------- Right\r\n    case '39':              // right\r\n      navigateonFactorAddInputs('right');\r\n      break;\r\n\r\n    // ---------------------------------------------------------- BackSpace\r\n    case '8':               // Back Space\r\n      break;\r\n\r\n    // ---------------------------------------------------------- Delete\r\n    case '46':              // delete\r\n      if(check_factor())\r\n      {\r\n        clearDropdown($('.dropdown.barCode'));\r\n\r\n        var selectedRowEl = getSelectedRow(true);\r\n        if(selectedRowEl)\r\n        {\r\n          // var nextSelectedRow = selectedRowEl.prev();\r\n          selectedRowEl.remove();\r\n          $('.dropdown.barCode input.search').val('').trigger(\"focus\");\r\n          // navigationFactorAddSetSelected(nextSelectedRow, true);\r\n          calcFooterValues();\r\n          _e.preventDefault();\r\n        }\r\n      }\r\n      break;\r\n\r\n\r\n    // ---------------------------------------------------------------------- shortcut\r\n    case '65ctrl':          // a + ctrl\r\n      break;\r\n\r\n    case '68shift':         // d + shift\r\n      break;\r\n\r\n    case '70':              // f\r\n      break;\r\n\r\n    case '72shift':         // h + shift (Home page)\r\n      break;\r\n\r\n    case '56shift':         // * | shift + 8\r\n    case '106':             // *\r\n      if(check_factor())\r\n      {\r\n        var RowCountEl = getSelectedRow();\r\n        if(RowCountEl)\r\n        {\r\n          var RowCountEl = RowCountEl.find('input.count');\r\n          RowCountEl.trigger(\"select\");\r\n        }\r\n          // _e.preventDefault();\r\n      }\r\n      break;\r\n\r\n    case '107':             // plus +\r\n    case '187shift':        // plus +\r\n      if(check_factor())\r\n      {\r\n        if($(\":focus\").parents('.dropdown').find('#productSearch'))\r\n        {\r\n          $('.dropdown.barCode input.search').trigger(\"select\");\r\n        }\r\n        else\r\n        {\r\n          $('.dropdown.barCode input.search').trigger(\"select\");\r\n          _e.preventDefault();\r\n        }\r\n      }\r\n      break;\r\n\r\n    case '109':             // minus -\r\n    case '189shift':        // minus -\r\n      if(check_factor())\r\n      {\r\n        var RowDiscountEl = getSelectedRow();\r\n        if(RowDiscountEl)\r\n        {\r\n          var RowDiscountEl = RowDiscountEl.find('input.discount');\r\n          RowDiscountEl.trigger(\"select\");\r\n        }\r\n        // _e.preventDefault();\r\n      }\r\n      break;\r\n\r\n    case '110':             // .\r\n    case '190':             // .\r\n      break;\r\n\r\n    case '111':             // divider on numpad\r\n    case '191':             // divider\r\n      if(check_factor())\r\n      {\r\n        if($(\":focus\").parents('.dropdown').find('#productSearch'))\r\n        {\r\n          $('.dropdown.barCode input.search').trigger(\"select\");\r\n        }\r\n        else\r\n        {\r\n          $('.dropdown.barCode input.search').trigger(\"select\");\r\n          _e.preventDefault();\r\n        }\r\n      }\r\n      break;\r\n\r\n    case '112':             // f1\r\n      break;\r\n\r\n    case '113':             // f2\r\n        // prevent any other change\r\n        _e.preventDefault();\r\n\r\n        // set factor url\r\n        var myPage     = $('body').attr('data-page');\r\n        var factorUrl  = '/a/sale?from='+ myPage;\r\n        var factorType = $('body').attr('data-page');\r\n        if($('html').attr('lang') !== undefined)\r\n        {\r\n          factorUrl = $('html').attr('lang')+ factorUrl;\r\n        }\r\n        // navigate to add new factor page\r\n        // Navigate({ url: factorUrl });\r\n        if(factorType === 'sale' && check_factor())\r\n        {\r\n          // if we are in check url, first check this one is empty or not\r\n          if(qtyFactorTableItems() == 0)\r\n          {\r\n            var msg = $('#factorAdd').attr('data-msgNewError');\r\n            notif('warn', msg, null, null, {\"displayMode\": 2});\r\n          }\r\n          else\r\n          {\r\n            window.open(factorUrl + '&extra=true', '_blank');\r\n          }\r\n        }\r\n        else\r\n        {\r\n          if(myPage === 'chap_receipt')\r\n          {\r\n            Navigate({ url: factorUrl });\r\n            // location.replace(factorUrl);\r\n          }\r\n          else\r\n          {\r\n            window.open(factorUrl, '_blank');\r\n          }\r\n        }\r\n      break;\r\n\r\n    case '113shift':        // shift+f2\r\n      prevFactor();\r\n      break;\r\n\r\n    case '113ctrlshift':        // shift+f2\r\n      prevFactor(undefined, true);\r\n      break;\r\n\r\n\r\n    case '114':             // f3\r\n    case '114ctrl':         // f3 + ctrl\r\n    case '70ctrl':          // f3 + ctrl\r\nlogy($('input.search'));\r\nlogy($('input.search').length);\r\n\r\n      if($('input[type=search]').length === 1)\r\n      {\r\n        $('input[type=search]').trigger(\"focus\");\r\n        _e.preventDefault();\r\n      }\r\n      else if($('select input.search').length === 2)\r\n      {\r\n        $('input.search').trigger(\"focus\");\r\n        _e.preventDefault();\r\n      }\r\n      break;\r\n\r\n    case '115':             // f4\r\n\r\n      break;\r\n\r\n    case '118':             // f7\r\n      if(check_factor())\r\n      {\r\n        shortkey_toggleDiscount();\r\n        _e.preventDefault();\r\n      }\r\n      break;\r\n\r\n    case '119':             // f8\r\n\r\n      break;\r\n\r\n   case '122shift':         // f11 + shift\r\n      break;\r\n\r\n   case '123':              // f12\r\n      break;\r\n\r\n    // ---------------------------------------------------------------------- mouse\r\n    case 'click':           // click\r\n      break;\r\n\r\n    case 'rightclick':        // Double click\r\n      break;\r\n\r\n    default:                // exit this handler for other keys\r\n      return;\r\n  }\r\n}\r\n\r\n\r\nfunction getSelectedRow(_confirm)\r\n{\r\n  if(check_factor())\r\n  {\r\n    var aa = $('table.productList tbody tr').length;\r\n    if(aa > 0)\r\n    {\r\n      var selectedRowEl = $('table.productList tbody tr[data-selected]');\r\n      if(selectedRowEl.length == 1)\r\n      {\r\n\r\n        // selectedRow = selectedRowEl.index();\r\n      }\r\n      else\r\n      {\r\n        if(_confirm)\r\n        {\r\n          $('table.productList tbody tr:eq(0)').attr('data-selected', 'warn');\r\n          return false;\r\n        }\r\n        else\r\n        {\r\n          selectedRowEl = $('table.productList tbody tr:eq(0)')\r\n        }\r\n      }\r\n      return selectedRowEl;\r\n    }\r\n  }\r\n  return null;\r\n}\r\n\r\nfunction check_factor()\r\n{\r\n  if($('#factorAdd').length > 0)\r\n  {\r\n    return true;\r\n  }\r\n\r\n  return false;\r\n}\r\n\r\n\r\n"]}