{%extends display.admin%}



{%block pageContent%}

<div class="f">
  <div class="x4 c5 s12">
    {{block('addNewCat')}}
  </div>
  <div class="c s12 mLa10">
    {{block('htmlTable')}}
  </div>
</div>

{%endblock%}

{%block addNewCat%}
<div class="cbox">

  {%if editMode%}
    <h3>{%trans "Edit category"%} <span class="fc-green txtB">{{requestGET.edit}}</span></h3>
  {%else%}
    <h3>{%trans "Add new category"%}</h3>
  {%endif%}

  <form method="post" autocomplete="off">
    {{block('catName')}}


    {%if editMode%}
      {%if productCount.count%}
        <div class="msg mT10 {%if productCount.count > 10%}danger{%else%}warn2{%endif%}">{%trans "By update name of this category all product will be update to new value."%} <a class="badge" href='{{url.this}}?cat={{requestGET.edit}}' title='{%trans "Click to check list of this product"%}'>{{productCount.count | fitNumber}} {%trans "Product"%}</a></div>
      {%else%}
        <div class="msg mT10 info2">{%trans "No product in this category"%} <div class="txtB mT10">{%trans "You can delete it now!"%}</div><a href="{{url.pwd}}" data-ajaxify data-data='{"removecat" : "{{productCount.title}}", "type" : "remove"}' data-method='post' class="badge danger floatL">{%trans "Remove"%}</a></div>
      {%endif%}


       <div class="f  mT20">
          <div class="c pRa10">
            <button class="btn outline warn block">{%trans "Edit"%}</button>
          </div>
          <div class="cauto">
            <a class="btn primary block" href="{{url.that}}">{%trans "Cancel"%}</a>
          </div>
       </div>
    {%else%}
       <button class="btn primary block mT20">{%trans "Add"%}</button>
    {%endif%}
  </form>
</div>
{%endblock%}




{% block catDefault %}
  <div class="switch1 mT10">
   <input type="checkbox" name="catdefault" id="catdefault" {%if requestGET.edit.default%} checked {%endif%}>
   <label for="catdefault"></label>
   <label for="catdefault">{%trans "Is default category?"%}</label>
  </div>
{%endblock%}



{%block iNumberType%}
<div class="mT20">
  <label for="type">{%trans "Decimal or Integer"%}</label>
  <select name="type" class="ui dropdown select">
    <option value="" readonly>{%trans "Decimal or Integer"%}</option>
    <option value="decimal" {%if dataRow.type == 'decimal' %}selected {%endif%}>{%trans "Decimal"%}</option>
    <option value="integer" {%if dataRow.type == 'integer' %}selected{%endif%}>{%trans "Integer"%}</option>
  </select>
</div>
{%endblock%}


{%block iMaxSale%}
<div class="mT10">
  <label for="imaxsale">{%trans "Max sale from this cat"%}</label>
  <div class="input">
     <input type="number" name="maxsale" id="imaxsale" placeholder='{%trans "For example 100"%}' value="{{requestGET.edit}}" autofocus maxlength='50' minlength="1"  >
  </div>
</div>
{%endblock%}



{%block catName%}
<label for="icatname">{%trans "Title"%}</label>
<div class="input">
  <input type="hidden" name="oldcat" value="{{requestGET.edit}}">
  <input type="text" name="cat" id="icatname" placeholder='{%trans "Category name"%}' value="{{requestGET.edit}}" autofocus maxlength='50' minlength="1"  required>
</div>
{%endblock%}



{%block htmlTable%}

  <table class="tbl1 v1 cbox fs12">
    <thead class="">
      <tr>
        <th>{%trans "Category"%}</th>
        <th class="txtC">{%trans "Count product"%}</th>
        <th class="txtC">{%trans "Action"%}</th>
      </tr>
    </thead>

    <tbody>
      {%for key, value in dataTable%}
      <tr class="{%if value.status == 'disable'%} negative{%else%} positive{%endif%}" {%if value.default%} title='{%trans "Is default"%}' {%endif%}>
        <td>
          {%if value.default%}<i class="sf-check fc-green"></i>{%endif%}
          {%if not value.title and value.title != '0' %}<small class="fc-mute">{%trans "Without Category"%}</small>{%else%}{{value.title}}{%endif%}</td>
        <td class="txtC">
          <a href="{{url.here}}/product?cat={{value.title}}">{{value.count | fitNumber}}</a>
        </td>
        <td class="collapsing">
          <a href="{{url.this}}/cats?edit={{value.title | url_encode }}" class="badge primary">{%trans "Edit"%}</a>
          <a href="{{url.here}}/product?cat={{value.title | url_encode }}" class="badge success">{%trans "Check Products"%}</a>

        </td>
      </tr>
      {%endfor%}
    </tbody>
  </table>

{%endblock%}



