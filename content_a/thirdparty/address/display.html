{%extends "content_a/thirdparty/layout.html"%}

{%block pageContent%}
{{block ("pageSteps")}}
{{block ("pageStepsProfile")}}


<div class="f">
 <div class="c3 s12 pRa10">
    {{block("psidebar")}}
 </div>
 <div class="c9 s12">

 		{{block('iformData')}}

 </div>
</div>


{%endblock%}




{%block iformData%}


{{block('bAddressList')}}


<form method="post" enctype="multipart/form-data" autocomplete="off">
  <div class="f justify-center">
    <div class="x5 c6 m8 s10">
{{block('bAddressAdd')}}
    </div>
  </div>
</form>
{%endblock%}




{%block bAddressAdd%}
  <div class="cbox">
    <h3 class="txtC">
    {%if addressDataRow%}
        {%trans "Edit address"%} <span class="txtB fc-blue">{{addressDataRow.title}}</span>
        <a class="badge secondary" href="{{url.this}}/address?id={{requestGET.id}}">{%trans "Cancel"%}</a>
    {%else%}
      {%trans "Add new address"%}
    {%endif%}
    </h3>

    {{block('iTitle')}}
    {{block('iName')}}
    {{block('iCountry')}}
    {{block('iCity')}}
    {{block('Neighborhood')}}
    {{block('iAddress')}}
    {{block('iPostcode')}}

    <div class="f">
      <div class="c pRa5">{{block('iPhone')}}</div>
      <div class="c">{{block('iMobile')}}</div>
    </div>

    {{block('iCompany')}}

    {%if addressDataRow%}
      <div class="f">
        <div class="c pRa5">{{block('isave')}}</div>
        <div class="cauto os">{{block('idelete')}}</div>
      </div>
    {%else%}
      {{block('iadd')}}
    {%endif%}

  </div>
{%endblock%}



{%block bAddressList%}
  {%if dataTable%}
    <table class="tbl1 v1 cbox fs12">
      <thead>
        <th colspan="7" class="collapsing">{%trans "Saved address"%}</th>
      </thead>
      <tbody>
      {%for key, value in dataTable%}
        <tr {%if requestGET.id == value.id%} class="negative" {%endif%}>
          <td class="collapsing pRa5">
            {%if value.company%}
              <i class="fs16 mRa5 sf-building"></i>
            {%else%}
              <i class="fs16 mRa5 sf-pin"></i>
            {%endif%}

          </td>
          <td class="txtB pRa10">

          <span >{{value.title}}</span>
          </td>
          <td class="pRa10">{%if value.country%}<i class="flag {{value.country | lower}}"></i>{%endif%}</td>
          <td class="pRa10">
            <span >{{value.location_string}}</span>
            <div>
              <span>{{value.address}}</span>
              {%if value.postcode%}
              <span title='{%trans "Postal code"%}' class="compact">{{value.postcode | fitNumber(false)}}<i class="sf-crosshairs mRL5"></i></span>
              {%endif%}
            </div>

          </td>
          <td class="pRa10">{{value.name}}</td>
          <td class="collapsing pRa10">
            {%if value.phone%}
              <div title='{%trans "Phone"%}'><i class="sf-phone"></i> {{value.phone | fitNumber(false)}}</div>
            {%endif%}
            {%if value.mobile%}
              <div title='{%trans "Mobile"%}' class="mT5"><i class="sf-mobile"></i> {{value.mobile | fitNumber('mobile')}}</div>
            {%endif%}
          </td>
          <td class="pRa10">
            <a class="badge light" href="{{url.this}}/address?id={{requestGET.id}}&addressid={{value.id}}"><i class="sf-pencil-square-o fs16"></i> {%trans "Edit"%}</a>
          </td>
        </tr>
      {%endfor%}
      </tbody>
    </table>
  {%endif%}
{%endblock%}



{%block iFirstname%}
<label for="firstname">{%trans "Firstname"%}</label>
<div class="input">
  <input type="text" name="firstname" id="firstname" value="{%if addressDataRow.firstname%}{{addressDataRow.firstname}}{%else%}{{user.firstname}}{%endif%}" maxlength='40' minlength="1">
</div>
{%endblock%}



{%block iLastname%}
<label for="lastname">{%trans "Lastname"%}</label>
<div class="input">
  <input type="text" name="lastname" id="lastname" value="{%if addressDataRow.lastname%}{{addressDataRow.lastname}}{%elseif not addressDataRow%}{{user.lastname}}{%endif%}" maxlength='40' minlength="1" >
</div>
{%endblock%}


{%block iName%}
<label for="name">{%trans "Name"%}</label>
<div class="input">
  <input type="text" name="name" id="name" value="{%if addressDataRow.name%}{{addressDataRow.name}}{%elseif not addressDataRow%}{{user.displayname}}{%endif%}" maxlength='40' minlength="1" placeholder='{%trans "Name of person in this address"%}'>
</div>
{%endblock%}



{%block iCountry%}
<div class="mB10">
  <label for='country'>{%trans "Country"%}</label>
  <div class="ui fluid search selection dropdown">
    <input type="hidden" name="country" value="{%if addressDataRow.country%}{{addressDataRow.country}}{%elseif lang.current == 'fa'%}IR{%endif%}">
    <i class="dropdown icon"></i>
    <div class="default text">{%trans "Choose your country"%}</div>
    <div class="menu">
{%for key, value in countryList%}
      <div class="item" data-value="{{key}}">
        <i class="{{value.iso2 | lower }} flag"></i>{%set myCountry = value.name%} {%trans myCountry%}<small class="description">{{value.name | capitalize}}</small>
      </div>
{%endfor%}
    </div>
  </div>
</div>
{%endblock%}



{%block iCity%}
<div data-response='country' data-response-where='IR' {%if addressDataRow.country == 'IR' or (not addressDataRow and lang.current == 'fa') %}{%else%}data-response-hide{%endif%}>

<label for='city'>{%trans "City"%}</label>
<select name="city" class="ui dropdown select search mB10" id="city">
  <option value="" readonly>{%trans "Select city"%}</option>
  {%for key, value in cityList%}
    <option value="{{key}}" {% if addressDataRow.city == key %} selected {%endif%}>{{value}}</option>
  {%endfor%}
</select>
</div>
{%endblock%}




{%block iPostcode%}
<label for="postcode">{%trans "Post code"%}</label>
<div class="input ltr">
  <input type="text" name="postcode" id="postcode" value="{{addressDataRow.postcode}}" maxlength='40' minlength="1" pattern=".{1,40}" >
</div>
{%endblock%}



{%block iTitle%}
<label for="title">{%trans "Title of address"%}</label>
<div class="input">
  <input type="text" name="title" id="title" value="{{addressDataRow.title}}" maxlength='40' minlength="1">
</div>
{%endblock%}



{%block iPhone%}
<label for="iphone">{%trans "Phone"%}</label>
<div class="input">
  <input type="tel" name="phone" id="iphone" value="{{addressDataRow.phone}}" pattern=".{1,20}">
</div>
{%endblock%}


{%block iFax%}
<label for="ifax">{%trans "Fax"%}</label>
<div class="input">
  <input type="tel" name="fax" id="ifax" value="{{addressDataRow.fax}}" pattern=".{1,20}">
</div>
{%endblock%}


{%block iMobile%}
<label for="iMobile">{%trans "Mobile"%}</label>
<div class="input">
  <input type="tel" name="mobile" id="iMobile" value="{%if addressDataRow.mobile%}{{addressDataRow.mobile}}{%endif%}" pattern=".{1,20}">
</div>
{%endblock%}




{%block iAddress%}
<label for="address">{%trans "Address"%} <small class="fc-red">{%trans "Require"%}</small></label>
<textarea class="txt mB10 pB25" name="address" required maxlength='300' rows="2">{{addressDataRow.address}}</textarea>
{%endblock%}


{%block iCompany%}
<div class="switch1 mB20 mT20">
 <input type="checkbox" name="company" id="company" {%if addressDataRow.company  %}checked{%endif%}>
 <label for="company" data-on='{%trans "Yes"%}' data-off='{%trans "No"%}'></label>
 <label for="company" >{%trans "Is this a company's address?"%}</label>
</div>
{%endblock%}



{%block iCompanyname%}
<label for="companyname">{%trans "Company name"%}</label>
<div class="input">
  <input type="text" name="companyname" id="companyname" value="{{addressDataRow.companyname}}" maxlength='40' minlength="1" >
</div>
{%endblock%}




{%block iStatus%}
<div class="mT10">
  <label for="status">{%trans "Status"%}</label>
  <select name="status" class="ui dropdown" id="status">
    <option value="" readonly>{%trans "Select one item"%} *</option>
    <option value="enable" {% if addressDataRow.status == 'enable' %} selected {%endif%}>{%trans "Enable"%}</option>
    <option value="disable" {% if addressDataRow.status == 'disable' %} selected {%endif%}>{%trans "Disable"%}</option>
    <option value="delete" {% if addressDataRow.status == 'delete' %} selected {%endif%}>{%trans "Removed"%}</option>
  </select>
</div>
{%endblock%}



{%block iadd%}
<button class="btn primary block mT20" cvalue="add">{%trans "Add"%}</button>
{%endblock%}

{%block isave%}
<button class="btn primary block mT20" name="btn" value="add">{%trans "Save"%}</button>
{%endblock%}

{%block idelete%}
<input type="hidden" name="id" value="{{addressDataRow.id}}">
<button class="btn danger outline block mT20" name="btnremove" value="delete">{%trans "Delete"%}</button>
{%endblock%}

