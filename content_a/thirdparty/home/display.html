{%extends display.admin%}


{%block pageContent%}

<div class="f mB25">
 <div class="c4 s6">{{block ("stCustomer")}}</div>
 <div class="c4 s6">{{block ("stStaff")}}</div>
 <div class="c4 s6">{{block ("stSupplier")}}</div>
</div>
<div class="f justify-center fs12">

  <div class="c8 m8 s12">

    <form method="get" data-action class="mB20">
      <div class="input">
        <input type="search" name="q" placeholder='{%trans "Search"%}' id="search" value="{{utilityGET.q}}">
        {%if utilityGET.type%}
          <input type="hidden" name="type" value="{{utilityGET.type}}">
        {%endif%}
        <button class="addon btn ">{%trans "Search" %}</button>
      </div>
    </form>

    {%for key, value in dataTable%}

      <div class="icard">

        <a class="size-we50 size-he50 pA2p5" href="{{url.this}}/edit/general?id={{value.id}}">
          <img src="{{value.avatar}}" alt="{{value.name}} {{value.lastname}}">
        </a>

        <div class="f-column align-start fc-black">
          <a href="{{url.this}}/edit/general?id={{value.id}}">
            {%if value.supplier%}
              <b>{{value.displayname}}</b><small>{{value.visitorname}}</small>
            {%else%}
              {{value.firstname}} <b>{{value.lastname}}</b>
            {%endif%}
          </a>
          <span>{{value.code}}</span>
        </div>

        <div class="justify-start">
          {%if value.supplier%}
            {%if value.visitormobile%}<span class="icon sf-mobile fs18"></span>
              {{value.visitormobile|fitNumber(false)}}
            {%endif%}
          {%else%}
            {%if value.mobile%}<span class="icon sf-mobile fs18"></span>
              {{value.mobile|fitNumber(false)}}
            {%endif%}
          {%endif%}
        </div>
        <div>
            {%if value.customer%}
              <a href="{{url.this}}?type={{value.type}}">{%trans "Customer"%}<i class="sf-users"></i></a>
            {%endif%}
            {%if value.staff%}
              <a href="{{url.this}}?type={{value.type}}">{%trans "Staff"%}<i class="sf-user-4"></i></a>
            {%endif%}
            {%if value.supplier%}
              <a href="{{url.this}}?type={{value.type}}">{%trans "Supplier"%}<i class="sf-network"></i></a>
            {%endif%}
        </div>
      </div>
    {%endfor%}
    {%include display.pagination%}
{{block('htmlFilter')}}
  </div>
</div>

{%endblock%}


{%block stCustomer%}
<a class="dcard {%if utilityGET.type == 'customer'%}active{%endif%}" href='{{url.this}}?type=customer' data-shortkey="49shift">
 <div class="statistic gray">
  <div class="value"><i class="sf-user"></i><span>{{dashboard_detail.customer_count | fitNumber}}</span></div>
  <div class="label">{%trans "Customer"%} <kbd>Shift+1</kbd></div>
 </div>
</a>
{%endblock%}


{%block stStaff%}
<a class="dcard {%if utilityGET.type == 'staff'%}active{%endif%}" href='{{url.this}}?type=staff' data-shortkey="50shift">
 <div class="statistic orange">
  <div class="value"><i class="sf-user-4"></i><span>{{dashboard_detail.staff_count | fitNumber}}</span></div>
  <div class="label">{%trans "Staff"%} <kbd>Shift+2</kbd></div>
 </div>
</a>
{%endblock%}



{%block stSupplier%}
<a class="dcard {%if utilityGET.type == 'supplier'%}active{%endif%}" href='{{url.this}}?type=supplier' data-shortkey="51shift">
 <div class="statistic teal">
  <div class="value"><i class="sf-network"></i><span class="fs08">{{dashboard_detail.supplier_count | fitNumber}}</span></div>
  <div class="label">{%trans "Supplier"%} <kbd>Shift+3</kbd></div>
 </div>
</a>
{%endblock%}


{%block htmlFilter%}
<p class="f fs14 alert alert-info">
  <span class="c">{{dataFilter | raw}}</span>
  <a class="cauto" href="{{url.this}}">{%trans "Clear filters"%}</a>
</p>
{%endblock%}
