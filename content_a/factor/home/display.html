{%extends display.admin%}

{%block pageContent%}

<div class="f justify-center fs12">
  <div class="c10 m8 s12">
    <form method="get" data-action class="mB20">
      <div class="input">
        <input type="text" name="search" placeholder='{%trans "Search in factors list"%}' id="search" value="{{utilityGET.search}}">
        <button class="addon btn ">{%trans "Search" %}</button>
      </div>
    </form>

    <table class="tbl">
      <thead>

        <tr>
          <th data-sort="{{sort_link.type.order}}"><a href="{{sort_link.type.link}}">{%trans "Type"%}</a></th>
          <th data-sort="{{sort_link.date.order}}"><a href="{{sort_link.date.link}}">{%trans "Invoice Date"%}</a></th>
          <th data-sort="{{sort_link.date.order}}"><a href="{{sort_link.date.link}}">{%trans "Customer"%}</a></th>
          <th data-sort="{{sort_link.item.order}}"><a href="{{sort_link.item.link}}">{%trans "Items"%}</a></th>
          <th data-sort="{{sort_link.qty.order}}"><a href="{{sort_link.qty.link}}">{%trans "Qty"%}</a></th>
          <th data-sort="{{sort_link.detailsum.order}}"><a href="{{sort_link.detailsum.link}}">{%trans "Price"%}</a></th>
          <th data-sort="{{sort_link.detaildiscount.order}}"><a href="{{sort_link.detaildiscount.link}}">{%trans "Discount"%}</a></th>
          <th data-sort="{{sort_link.detailtotalsum.order}}"><a href="{{sort_link.detailtotalsum.link}}">{%trans "Total"%}</a></th>
        </tr>

      </thead>
      <tbody>
        {%for key, value in factor_list%}
          <tr>
            <td>{%set myType = value.type | capitalize%}<a href="{{url.baseFull}}/factor?type={{value.type}}">{%trans myType%}</a></td>
            <td class="ltr txtL"><a href="{{url.baseFull}}/factor/fishprint?id={{value.id}}&size=receipt8">{{value.date|tdate("Y-m-d")}} <b>{{value.date|tdate("H:i:s")}}</b></a></td>
            <td>
            {%if value.customer%}
              {{value.customer_firstname}} <b>{{value.customer_lastname}}</b>
            {%else%}
              <i class="disabled">-</i>
            {%endif%}
            </td>
            <td>{{value.item| number_format | fitNumber}}</td>
            <td>{{value.qty| number_format | fitNumber}}</td>
            <td>{{value.detailsum| number_format | fitNumber}}</td>
            <td>{{value.detaildiscount| number_format | fitNumber}}</td>
            <td>{{value.detailtotalsum| number_format | fitNumber}}</td>
          </tr>
        {%endfor%}
      </tbody>
    </table>


    {%include display.pagination%}
    <a href="{{url.baseFull}}/factor/add" class="btn primary block">{%trans "Add new factor"%}</a>
  </div>
</div>

{%endblock%}

{%block footer2%}
  <a class="c btn mA10" href='{{url.baseFull}}/factor/add?type=sell'>{%trans "Sell"%}</a>
  <a class="c btn mA10" href='{{url.baseFull}}/factor/add?type=buy'>{%trans "Buy"%}</a>
  <a class="c btn mA10" href='{{url.baseFull}}/factor/add?type=prefactor'>{%trans "Prefactor"%}</a>
  <a class="c btn mA10" href='{{url.baseFull}}/factor/add?type=lending'>{%trans "Lending"%}</a>
  <a class="c btn mA10" href='{{url.baseFull}}/factor/add?type=backbuy'>{%trans "Backbuy"%}</a>
  <a class="c btn mA10" href='{{url.baseFull}}/factor/add?type=backfactor'>{%trans "Backfactor"%}</a>
  <a class="c btn mA10" href='{{url.baseFull}}/factor/add?type=waste'>{%trans "Waste"%}</a>
{%endblock%}



{%block all_field_we_have_hidden%}

    'id'             => string '4' (length=1)
    'store_id'       => string '9' (length=1)
    'customer'       => null
    'factorer'         => string '7' (length=1)
    'date'           => string '2017-11-20 15:37:57' (length=19)
    'shamsidate'     => string '13960829' (length=8)
    'title'          => null
    'pre'            => null
    'transport'      => null
    'pay'            => null
    'detailsum'      => string '16000' (length=5)
    'detaildiscount' => null
    'detailtotalsum' => string '16000' (length=5)
    'item'    => string '2' (length=1)
    'vat'            => null
    'discount'       => null
    'sum'            => string '16000' (length=5)
    'status'         => string 'enable' (length=6)
    'datecreated'    => string '2017-11-20 15:37:57' (length=19)
    'datemodified'   => null
    'desc'           => null

{%endblock%}