{%extends "content_a/product/layout.html"%}


{%block pageContent%}
{{block('pageSteps')}}
{{block('pageStepsSite')}}
<div class="f">
 <div class="cauto s12 pA10">
{{block("psidebar")}}
 </div>
 <div class="c s12 pA10">
  {{block('iFormThumb')}}
  {{block('iDataForm')}}
 </div>
</div>
{%endblock%}

{%block iDataForm%}
<div class="cbox">
{{block('galleryImporter')}}
{{block('iGalleryShow')}}
</div>
{%endblock%}





{%block galleryImporter %}
<div class="dropzone">
  <h4>{%trans "Add to gallery"%}</h4>
  <label for='gallery' class="btn light">{%trans "To add image gallery drop file here or click here"%}</label>
  <input id="gallery" type="file" name="gallery" multiple>
  <div class="progress shadow" data-percent='30'>
    <div class="bar"></div>
    <div class="detail"></div>
  </div>
  <small>{%trans "Maximum file size"%} <b>{{maxUploadSize}}</b></small>
</div>
{% endblock %}




{%block iGalleryShow%}

{%if dataRow.gallery_array.gallery%}
<div class="cbox">
  <h2>{%trans "Gallery"%}</h2>
  <div class="normal f">

    {% for key, myUrl in dataRow.gallery_array.gallery%}
      <div class="vcard mA10">

        {%if myUrl ends with '.jpg' or myUrl ends with '.png' or myUrl ends with '.gif'%}
        <img src="{{myUrl}}">
        <div class="content"></div>
        {%elseif myUrl ends with '.mp4' %}
        <video>
          <source src="{{myUrl}}" type="video/mp4">
        </video>
        <div class="content"><a href="{{myUrl}}" title='{%trans "Click to download"%}'>{%trans "Video"%}</a></div>
        <div class="content"></div>
        {%elseif myUrl ends with '.mp3' %}
        <audio controls>
          <source src="{{myUrl}}" type="audio/mpeg">
        </audio>
        <div class="content"><a href="{{myUrl}}" title='{%trans "Click to download"%}'>{%trans "MP3"%}</a></div>
        {%elseif myUrl ends with '.pdf' %}
          <div class="content title"><a href="{{myUrl}}" title='{%trans "Click to download"%}'>{%trans "PDF"%}</a></div>
        {%else%}
        <div class="content title"><a href="{{myUrl}}" title='{%trans "Click to download"%}'>{%trans "Without preview"%}</a></div>
        {%endif%}
        <div class="footer f">
          <button class="btn block secondary" data-ajaxify data-data='{"type" : "remove_gallery", "id": "{{key}}"}' data-method='post'>{%trans "Remove"%}</button>
        </div>
      </div>
    {%endfor%}
  </div>
</div>
{%endif%}

{%endblock%}


{%block iFormThumb%}
<form class="cbox" method="post" enctype="multipart/form-data">

<input type="hidden" name="formType" value="thumb">
 <div class="input preview">
 <input type="file" accept="image/gif, image/jpeg, image/png" name="thumb" id="avatar1" data-preview data-max="500">
 <label for="avatar1" title='{%trans "allowed extentions jpg, png (gif for business plans). Max 500Kb"%}'>
{%if dataRow.thumb%}
   <img src="{{dataRow.thumb}}" alt="{{dataRow.name}}" id="avatarPreview">
{%endif%}
 </label>
</div>

{%if dataRow.thumb_raw%}
<div class="f mT10">
  <div class="c pRa5">
    <button class="btn block primary">{%trans "Save"%}</button>
  </div>
  <div class="cauto">
    <button class="btn block danger" name="delete" value="thumb">{%trans "Remove"%}</button>
  </div>
</div>
{%else%}
  <button class="mT10 btn block primary">{%trans "Save"%}</button>
{%endif%}
</form>
{%endblock%}
