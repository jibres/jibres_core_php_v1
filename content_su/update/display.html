{%extends display.dash%}


{%block pageContent%}
<p class="msg danger2 fs16 txtC">{%trans "If you dont know about this page, leave it!"%}</p>

{%if isLockService%}
  <p class="msg danger  fs20 txtB txtC">{%trans "Service is Locked!"%}</p>
{%else%}
  <p class="msg success fs20 txtB txtC">{%trans "Service is Running!"%}</p>
{%endif%}

<div class="f">
  <div class="c s12">
    {{block('iDbLock')}}
  </div>
  <div class="c s12">
    {{block('iDbGitPull')}}
  </div>
  <div class="c s12">
    {{block('iDbDbUpgrade')}}
  </div>
  <div class="c s12">
    {{block('iDbUnlock')}}
  </div>
</div>

<div class="f">
  <div class="c s6">
    <div class="msg fs14">
    <p>{%trans "If you want to show git pull result click below link"%}</p>
    <a class="btn warn" target="_blank" href="{{url.this}}?git=all">{%trans "Pull gir repository"%}</a>
    </div>
  </div>

  <div class="c s6 mLa5">

      <div class="msg fs14">
      <p>{%trans "Remove Twig temp cache file"%}</p>
      <div data-confirm data-data='{"type": "remove_cache"}' class="btn info" >{%trans "Empty cache"%}</div>
      </div>
  </div>
</div>

{%if isLockService%}
<div class="msg fs14">
<p>{%trans "Force unlock page"%}</p>
<a class="btn success" target="_blank" href="{{url.kingdom}}/forceunlock?force=1">{%trans "Force unlock page"%}</a>
</div>


{%endif%}


{%if needUpgrade%}
  <div class="msg danger2 fs14">
  <p>{%trans "Database need to upgrade"%}</p>
   <div class="f">
    {%if needUpgrade.jibres%}
      <div class="c">
        <span>{%trans "Jibres"%}</span>
         <div>{%trans "current version" %} {{needUpgrade.jibres.current}}</div>
         <div>{%trans "new version" %} {{needUpgrade.jibres.upgrade}}</div>
      </div>
    {%endif%}

    {%if needUpgrade.store%}
      <div class="c">
        <span>{%trans "Stores"%}</span>
         <div>{%trans "current version" %} {{needUpgrade.store.current}}</div>
         <div>{%trans "new version" %} {{needUpgrade.store.upgrade}}</div>
      </div>
    {%endif%}
   </div>
  </div>
{%endif%}

<div class="msg fs14">
<p>{%trans "Run all step by one click"%} <small>{%trans "For when you don't have heavy updates"%}</small></p>
<div class="btn danger" data-confirm data-data='{"type" : "all"}'>{%trans "Run all"%}</div>
</div>
<div class="mB50">&nbsp;</div>


{%endblock%}




{%block iDbLock%}
<div class="dcard x2 mB10" data-confirm data-data='{"type" : "lock"}'>
  <div class="statistic red">
    <div class="value">{%trans "Lock"%}</div>
    <div class="label">{%trans "Lock service"%}</div>
  </div>
</div>
{%endblock%}



{%block iDbGitPull%}
<div class="dcard x2 mB10" data-confirm data-data='{"type" : "pull"}'>
  <div class="statistic yellow">
    <div class="value">{%trans "Pull"%}</div>
    <div class="label">{%trans "Pull service"%} </div>
  </div>
</div>

{%endblock%}



{%block iDbDbUpgrade%}
<div class="dcard x2 mB10" data-confirm data-data='{"type" : "upgrade"}'>
  <div class="statistic blue">
    <div class="value">{%trans "Upgrade"%}</div>
    <div class="label">{%trans "Update database"%}</div>
  </div>
</div>
{%endblock%}



{%block iDbUnlock%}
<div class="dcard x2 mB10" data-confirm data-data='{"type" : "unlock"}'>
  <div class="statistic green">
    <div class="value">{%trans "Unlock"%}</div>
    <div class="label">{%trans "Unlock service"%}</div>
  </div>
</div>
{%endblock%}

